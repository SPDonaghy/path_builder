<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Global Path Builder</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
        <link rel="icon" href="https://ubcsailbot.github.io/docs/main/assets/images/favicon.png">
    </head>
    <body style="margin:0">
        <div class="text">
            <div class="container" id="banner">
                <h2 style="text-wrap:nowrap;">Global Path Builder</h2>
                <div id="banner_btns">
                    <!-- Buttons -->
                    <div class="buttons">
                        <!-- Download Path Button -->
                        <button id="export_btn" title="Save path to a csv file" onclick="downloadPath()">Download Path</button>

                        <!-- Upload Path Button -->
                        <button id="import_btn" title="Load path from a csv file" onclick="openModal()">Upload Path</button>

                        <!-- Other Buttons (unchanged) -->
                        <button id="inter_btn" title="Interpolate between waypoints" onclick="interpolate()">Interpolate</button>
                        <button id="clear_btn" title="Clear all waypoints from the map" onclick="clear_path(true)">Clear Path</button>
                        <button id="plot_btn" title="Plot path on a 3D globe" onclick="plot()">3D Plot</button>
                    </div>

                    <!-- Modal for File Upload -->
                    <div id="myModal" class="modal">
                        <div class="modal-content">
                        <span class="close" onclick="closeModal()">&times;</span>
                        <label for="import_input">Choose CSV file:</label>
                        <input type="file" id="import_input" accept=".csv" onchange="uploadPath()">
                        </div>
                    </div>
                    </div>
                </div>
            </div>

            <div id="main_view">
                <!-- Map container -->
                <div id="map" class="container"></div>

                <div class="container waypoints text">
                    <!-- Waypoints list -->
                    <h2 style="color:black">Waypoints</h2>
                    <h2 id="count" style="color:black"># of Waypoints:</h2>
                    <table id="waypointsTable">
                        <thead>
                            <tr>
                                <th>Latitude</th>
                                <th>Longitude</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Waypoints will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="info text container">
                <h2>Information:</h2>
                <p class="info-text">This Path Builder is a custom user interface designed for use by the UBC Sailbot student design team. Sailbot's mission is to construct an autonomous sailboat to be deployed on a research expedition to Alaska in the spring of 2025.</p>
                <p class="info-text">This tool was designed to make global path editing easy and intuitive. It has significantly streamlined the process of building and testing paths for simulations and navigation system validation. The path builder also utilizes a path interpolation function which converts sparse paths into denser, evenly spaced paths for improved performance of path planning between global waypoints.</p>
                <p class="info-text">This project was created using primarily Flask, PyProj, and Plotly</p>    
            </div>
        </div>
    </body>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</html>
